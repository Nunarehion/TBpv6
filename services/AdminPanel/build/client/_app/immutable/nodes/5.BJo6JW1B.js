import"../chunks/Bzak7iHL.js";import"../chunks/69_IOA4Y.js";import{c as X,o as ot}from"../chunks/bhRhCqWC.js";import{p as I,b as g,e as h,r as f,t as F,n as o,a as l,d as K,O as V,k as H,s as k,aP as rt,ab as L,aF as lt,aQ as nt,o as G,c as W,f as M}from"../chunks/CnxLOvM0.js";import{s as P,e as A}from"../chunks/BFpeZ14H.js";import{i as z,s as ct,a as N}from"../chunks/DulKp6NI.js";import{i as R}from"../chunks/C-D-gK8t.js";import{p as S}from"../chunks/h1hal1Ui.js";import{e as Y,i as tt}from"../chunks/DVubXfnJ.js";import{s as it}from"../chunks/m49QtOYO.js";import{r as vt,s as Z}from"../chunks/CNL2E_I9.js";import{b as dt}from"../chunks/BV2Y1Hvn.js";import{p as ut}from"../chunks/Bfc47y5P.js";import{w as Q}from"../chunks/5VKP8Fpw.js";var ft=g("<li><button> </button></li>"),mt=g('<ul class="svelte-coqzwe"></ul>');function pt(E,n){I(n,!1);let c=S(n,"collections",24,()=>[]),D=S(n,"selected",8,null),i=S(n,"loadingDocuments",8,!1);const m=X();R();var d=mt();Y(d,5,c,tt,(O,v)=>{var u=ft(),s=h(u);let p;var b=h(s,!0);f(s),f(u),F(j=>{s.disabled=i()&&D()===o(v),p=it(s,1,"svelte-coqzwe",null,p,j),P(b,o(v))},[()=>({selected:D()===o(v)})]),A("click",s,()=>m("select",o(v))),l(O,u)}),f(d),l(E,d),K()}var _t=g('<div class="field svelte-tqmjph"><label class="svelte-tqmjph"> </label> <input type="text" class="svelte-tqmjph"/></div>'),gt=g('<pre class="json svelte-tqmjph"> </pre>'),ht=g('<div class="card svelte-tqmjph"><form class="svelte-tqmjph"><!> <div class="card-footer actions svelte-tqmjph"><button type="submit" class="svelte-tqmjph">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button> <button type="button" class="svelte-tqmjph">–û—Ç–º–µ–Ω–∞</button> <button type="button" class="svelte-tqmjph"> </button></div></form> <!></div>');function bt(E,n){I(n,!1);let c=S(n,"doc",8);const D=X();let i=V(structuredClone(c())),m=V(!1),d=V(!1);async function O(){L(d,!0),D("save",o(i)),L(d,!1)}function v(){L(i,structuredClone(c())),D("cancel")}R();var u=ht(),s=h(u),p=h(s);Y(p,1,()=>(o(i),H(()=>Object.entries(o(i)))),tt,(e,t)=>{var r=lt(()=>nt(o(t),2));let a=()=>o(r)[0];var x=_t(),_=h(x),w=h(_,!0);f(_);var $=k(_,2);vt($),f(x),F(()=>{Z(_,"for","field-"+a()),P(w,a()),Z($,"id","field-"+a()),$.readOnly=a()==="_id"}),dt($,()=>o(i)[a()],U=>rt(i,o(i)[a()]=U)),l(e,x)});var b=k(p,2),j=h(b),J=k(j,2),q=k(J,2),y=h(q,!0);f(q),f(b),f(s);var C=k(s,2);{var T=e=>{var t=gt(),r=h(t,!0);f(t),F(a=>P(r,a),[()=>(G(c()),H(()=>JSON.stringify(c(),null,2)))]),l(e,t)};z(C,e=>{o(m)&&e(T)})}f(u),F(()=>{j.disabled=o(d),J.disabled=o(d),P(y,o(m)?"‚ñ≤ –°–∫—Ä—ã—Ç—å JSON":"‚ñº –ü–æ–∫–∞–∑–∞—Ç—å JSON")}),A("click",J,v),A("click",q,()=>L(m,!o(m))),A("submit",s,ut(O)),l(E,u),K()}var yt=g("<p>–ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤...</p>"),Dt=g("<p>–î–æ–∫—É–º–µ–Ω—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç</p>"),jt=g('<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1rem;"></div>'),xt=g("<h2> </h2> <!>",1);function qt(E,n){I(n,!1);let c=S(n,"documents",24,()=>[]),D=S(n,"loading",8,!1),i=S(n,"selectedCollection",8);const m=X();R();var d=W(),O=M(d);{var v=u=>{var s=xt(),p=M(s),b=h(p);f(p);var j=k(p,2);{var J=y=>{var C=yt();l(y,C)},q=y=>{var C=W(),T=M(C);{var e=r=>{var a=Dt();l(r,a)},t=r=>{var a=jt();Y(a,5,c,x=>x._id,(x,_)=>{bt(x,{get doc(){return o(_)},$$events:{save:w=>m("save",w.detail)}})}),f(a),l(r,a)};z(T,r=>{G(c()),H(()=>c().length===0)?r(e):r(t,!1)},!0)}l(y,C)};z(j,y=>{D()?y(J):y(q,!1)})}F(()=>P(b,`–î–æ–∫—É–º–µ–Ω—Ç—ã –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏: ${i()??""}`)),l(u,s)};z(O,u=>{i()&&u(v)})}l(E,d),K()}var Ct=g('<p style="color: red"> </p>'),wt=g("<p>–ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–π...</p>"),$t=g('<div class="wrap"><!></div> <!>',1),kt=g("<h1>–°–ø–∏—Å–æ–∫ –∫–æ–ª–ª–µ–∫—Ü–∏–π –∏–∑ MongoDB</h1> <!>",1);function At(E,n){I(n,!1);const[c,D]=ct(),i=()=>N(b,"$fetchError",c),m=()=>N(u,"$selectedCollection",c),d=()=>N(p,"$loadingDocuments",c),O=()=>N(s,"$documents",c);let v=S(n,"data",8);const u=Q(null),s=Q([]),p=Q(!1),b=Q(null);async function j(e){u.set(e),p.set(!0),b.set(null);try{const t=await fetch(`/api/${e}`);if(!t.ok){const a=await t.json();throw new Error(a.error||`HTTP error! Status: ${t.status}`)}const r=await t.json();s.set(r)}catch(t){console.error(`Error loading documents for ${e}:`,t),b.set(t.message),s.set([])}finally{p.set(!1)}}async function J(e,t){console.log(`Saving document in ${e}:`,t)}ot(()=>{v().collections.length>0&&j(v().collections[0])}),R();var q=kt(),y=k(M(q),2);{var C=e=>{var t=Ct(),r=h(t);f(t),F(()=>P(r,`–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: ${i()??""}`)),l(e,t)},T=e=>{var t=W(),r=M(t);{var a=_=>{var w=wt();l(_,w)},x=_=>{var w=$t(),$=M(w),U=h($);pt(U,{get collections(){return G(v()),H(()=>v().collections)},get selected(){return m()},get loadingDocuments(){return d()},$$events:{select:B=>j(B.detail)}}),f($);var et=k($,2);{var at=B=>{qt(B,{get documents(){return O()},get loading(){return d()},get selectedCollection(){return m()},$$events:{save:st=>J(m(),st.detail)}})};z(et,B=>{m()&&B(at)})}l(_,w)};z(r,_=>{G(v()),H(()=>v().collections.length===0)?_(a):_(x,!1)},!0)}l(e,t)};z(y,e=>{i()?e(C):e(T,!1)})}l(E,q),K(),D()}export{At as component};
